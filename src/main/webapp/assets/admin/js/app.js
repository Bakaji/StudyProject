(function(t){function e(e){for(var n,a,i=e[0],u=e[1],c=e[2],d=0,h=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(h.length)h.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,i=1;i<o.length;i++){var u=o[i];0!==r[u]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=o[0]))}return t}var n={},r={app:0},s=[];function a(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=n,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},1896:function(t,e,o){"use strict";var n=o("aeac"),r=o.n(n);r.a},"21bb":function(t,e,o){"use strict";var n=o("2dad"),r=o.n(n);r.a},"25ee":function(t,e,o){"use strict";var n=o("92e1"),r=o.n(n);r.a},"2dad":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e),o.d(e,"relativeLink",(function(){return ft}));o("99af"),o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("a026"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("nav",[t._m(0),o("section",{staticClass:"right"},[o("a",{attrs:{href:"#"},on:{click:this.goHome}},[o("button",[t._v("Livres et auteurs")])]),o("a",{attrs:{href:"#"},on:{click:this.goEditProfile}},[o("button",[t._v("Modifier Compte administrateur")])]),o("a",{attrs:{href:"#"}},[o("button",{staticClass:"danger",on:{click:t.logout}},[t._v("Se déconnecter")])])])]),o("main",[this.isHome?o("Home"):t._e(),this.isEditProfile?o("EditAdmin"):t._e(),this.isEditBook?o("EditBook"):t._e(),this.isEditAuthor?o("EditAuthor"):t._e()],1)])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"left"},[o("a",{attrs:{href:"#"}},[o("h3",[t._v("Bibliothèque")])])])}],a=(o("ac1f"),o("5319"),o("5530")),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("section",[o("h3",[t._v("Liste des auteurs")]),o("div",{staticClass:"header"},[o("span",{on:{click:function(e){return t.sortAuthorsBy("last_name")}}},[t._v("Nom")]),o("span",{on:{click:function(e){return t.sortAuthorsBy("first_name")}}},[t._v("Prénom")]),o("span",{on:{click:function(e){return t.sortAuthorsBy("birth_day")}}},[t._v("Date de naissance")])]),o("AuthorsList"),o("div",{staticClass:"control-buttons"},[o("a",{attrs:{href:t.addAuthorLink}},[o("button",[t._v("Ajouter auteur")])]),t.selectedAuthor?o("a",{attrs:{href:"#"}},[o("button",{on:{click:t.modifyAuthor}},[t._v("Modifier")])]):t._e(),t.selectedAuthor?o("a",{attrs:{href:"#"},on:{click:t.promptDeletingAuthor}},[o("button",{staticClass:"danger"},[t._v("Supprimer")])]):t._e()])],1),t.selectedAuthor?o("section",[o("h3",[t._v("Liste des livres")]),o("div",{staticClass:"header"},[o("span",{on:{click:function(e){return t.sortBooksBy("book_title")}}},[t._v("Titre")]),o("span",{on:{click:function(e){return t.sortBooksBy("book_page_numbers")}}},[t._v("Nombre des pages")])]),o("BooksList",{key:t.author_id}),o("div",{staticClass:"control-buttons"},[o("a",{attrs:{href:t.addBookLink}},[o("button",[t._v("Ajouter livre")])]),t.selectedBook?o("a",{attrs:{href:"#"}},[o("button",{on:{click:t.modifyBook}},[t._v("Modifier")])]):t._e(),t.selectedBook?o("a",{attrs:{href:"#"},on:{click:t.promptDeleting}},[o("button",{staticClass:"danger"},[t._v("Supprimer")])]):t._e()])],1):t._e()])},u=[],c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list-wrapper"},[this.authors.length>0?o("ul",t._l(this.authors,(function(e){return o("li",{key:e.author_id,class:{selected:t.authorSelected(e.author_id)},on:{click:function(o){return t.selectAuthor(e)}}},[o("span",[t._v(t._s(e.last_name))]),o("span",[t._v(t._s(e.first_name))]),o("span",[t._v(t._s(e.birth_day))])])})),0):o("div",{staticClass:"no-items"},[o("span",[t._v("pas des auteurs ")])])])},l=[],d=o("2f62"),h={name:"AuthorsList",methods:{authorSelected:function(t){return null!=this.selectedAuthor&&this.selectedAuthor.author_id===t},selectAuthor:function(t){this.$store.dispatch("selectAuthor",t)}},computed:Object(a["a"])({},Object(d["c"])(["authors","selectedAuthor"]))},p=h,m=o("2877"),f=Object(m["a"])(p,c,l,!1,null,null,null),_=f.exports,v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list-wrapper"},[this.authorBooks.length>0?o("ul",t._l(this.authorBooks,(function(e){return o("li",{key:e.book_issn,class:{selected:t.bookSelected(e.book_issn)},on:{click:function(o){return t.selectBook(e)}}},[o("span",[t._v(t._s(e.book_title))]),o("span",[t._v(t._s(e.book_page_numbers))])])})),0):o("div",{staticClass:"no-items"},[o("span",[t._v("cet auteur n'a pas des livres")])])])},b=[],k={name:"BooksList",computed:Object(a["a"])({},Object(d["c"])(["authorBooks","selectedBook"])),methods:{bookSelected:function(t){return null!=this.selectedBook&&this.selectedBook.book_issn===t},selectBook:function(t){this.$store.dispatch("selectBook",t)}}},g=k,y=Object(m["a"])(g,v,b,!1,null,null,null),A=y.exports,B=document.createElement("p"),w=document.createElement("div"),x=document.createElement("div"),E=document.createElement("div"),j=document.createElement("button"),O=document.createElement("button"),C=document.createElement("div");E.style.height="100vh",E.style.width="100vw",E.style.position="fixed",E.style.top="0",E.style.left="0",E.style.backgroundColor="#00000099",E.style.display="none",x.style.height="200px",x.style.width="90%",x.style.backgroundColor="white",x.style.position="fixed",x.style.top="50%",x.style.left="50%",x.style.transform="translate(-50%,-50%)",x.style.flexDirection="column",x.style.display="flex",w.style.flex="1",w.style.display="flex",w.style.justifyContent="center",w.style.alignItems="center",w.style.borderBottom="1px solid #fafafa",C.style.flexBasis="70px",C.style.display="flex",C.style.justifyContent="space-around",C.style.alignItems="center",j.innerText="Oui",O.innerText="Non",j.style.backgroundColor="red",j.style.height=O.style.height="40px",j.style.width=O.style.width="150px",w.appendChild(B),C.appendChild(j),C.appendChild(O),x.appendChild(w),x.appendChild(C),E.appendChild(x),document.body.appendChild(E);var $=function(){};function L(){j.removeEventListener("click",$),B.innerText="",E.style.display="none"}function P(t,e){E.style.display="flex",B.innerText=t,$=function(){e(),L()},j.addEventListener("click",$)}O.addEventListener("click",L);var S={name:"Home",components:{BooksList:A,AuthorsList:_},computed:Object(a["a"])(Object(a["a"])({},Object(d["c"])(["selectedAuthor","selectedBook"])),{},{author_id:function(){return null!==this.selectedAuthor?this.selectedAuthor.author_id:-1},addAuthorLink:function(){return ft("/admin/add-author/")},addBookLink:function(){var t="?authorId="+(null!==this.selectedAuthor?this.selectedAuthor.author_id:-1);return ft("/admin/authors/add-book"+t)}}),methods:{modifyBook:function(){this.$store.dispatch("goEditBook")},sortAuthorsBy:function(t){this.$store.commit("sortAuthorsByKey",t)},sortBooksBy:function(t){this.$store.commit("sortBooksByKey",t)},modifyAuthor:function(){this.$store.dispatch("goEditAuthor")},promptDeleting:function(){var t=this;P("est-ce que vous etez sure de supprimer le livre "+this.selectedBook.book_title+" ?",(function(){t.$store.dispatch("deleteBook",t.selectedBook.book_issn)}))},promptDeletingAuthor:function(){var t=this;P("est-ce que vous etez sure de supprimer l'auteur' "+this.selectedAuthor.first_name+" "+this.selectedAuthor.last_name+" ?",(function(){t.$store.dispatch("deleteAuthor",t.selectedAuthor.author_id)}))}},mounted:function(){this.$store.dispatch("loadAuthors")}},M=S,N=(o("21bb"),Object(m["a"])(M,i,u,!1,null,null,null)),H=N.exports,R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("h1",[t._v("Modifier Utilisateur")]),o("div",{staticClass:"form-container"},[o("form",{attrs:{method:"POST",action:t.postLink}},[o("label",{attrs:{for:"username"}},[t._v("Nom d'utilisateur")]),o("input",{attrs:{id:"username",required:"",type:"text",name:"username"}}),o("label",{attrs:{for:"password"}},[t._v("Mot de passe")]),o("input",{attrs:{id:"password",required:"",type:"password",name:"password"}}),o("label",{attrs:{for:"conf_password"}},[t._v("Confirmation mot de passe")]),o("input",{attrs:{id:"conf_password",required:"",type:"password",name:"conf_password"}}),t._m(0)])])])},D=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("input",{attrs:{type:"submit",value:"Modifier"}})])}],T={name:"EditAdmin",computed:{postLink:function(){return ft("/edit-admin")}}},q=T,I=(o("1896"),Object(m["a"])(q,R,D,!1,null,null,null)),K=I.exports,z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{key:this.selectedBook.book_issn,staticClass:"container",staticStyle:{"flex-direction":"column"}},[o("h1",{attrs:{id:"EditingHeader"}},[t._v("Modification du document : "+t._s(t.target.book_title))]),o("div",{staticClass:"form-container"},[o("form",{attrs:{action:"#"},on:{submit:t.update}},[o("label",{attrs:{for:"book_new_issn"}},[t._v("ISSN")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.book_new_issn,expression:"target.book_new_issn"}],attrs:{type:"text",id:"book_new_issn"},domProps:{value:t.target.book_new_issn},on:{input:function(e){e.target.composing||t.$set(t.target,"book_new_issn",e.target.value)}}}),o("label",{attrs:{for:"book_title"}},[t._v("Titre")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.book_title,expression:"target.book_title"}],attrs:{type:"text",id:"book_title"},domProps:{value:t.target.book_title},on:{input:function(e){e.target.composing||t.$set(t.target,"book_title",e.target.value)}}}),o("label",{attrs:{for:"book_resume"}},[t._v("Résumé")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.target.book_resume,expression:"target.book_resume"}],attrs:{id:"book_resume"},domProps:{value:t.target.book_resume},on:{input:function(e){e.target.composing||t.$set(t.target,"book_resume",e.target.value)}}}),t._v(" "),o("label",{attrs:{for:"book_page_numbers"}},[t._v("Nombre des pages")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.book_page_numbers,expression:"target.book_page_numbers"}],attrs:{type:"number",id:"book_page_numbers"},domProps:{value:t.target.book_page_numbers},on:{input:function(e){e.target.composing||t.$set(t.target,"book_page_numbers",e.target.value)}}}),o("label",{attrs:{for:"book_domain"}},[t._v("Domaine")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.book_domain,expression:"target.book_domain"}],attrs:{type:"text",id:"book_domain"},domProps:{value:t.target.book_domain},on:{input:function(e){e.target.composing||t.$set(t.target,"book_domain",e.target.value)}}}),o("div",{staticClass:"actions-container"},[o("input",{attrs:{type:"button",value:"Annuler"},on:{click:t.cancel}}),o("input",{attrs:{type:"submit",value:"Modifier"}})])])])])},J=[],U={name:"EditBook",data:function(){return{target:{}}},computed:Object(a["a"])({},Object(d["c"])(["selectedBook"])),mounted:function(){this.selectedBook&&(this.target=Object(a["a"])(Object(a["a"])({},this.selectedBook),{},{book_old_issn:this.selectedBook.book_issn,book_new_issn:this.selectedBook.book_issn}),delete this.target.book_issn)},methods:{update:function(t){t.preventDefault(),this.$store.dispatch("editBook",this.target)},cancel:function(){this.$store.dispatch("goHome")}}},V=U,F=(o("c63c"),Object(m["a"])(V,z,J,!1,null,null,null)),G=F.exports,Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{key:this.selectedAuthor.author_id,staticClass:"container",staticStyle:{"flex-direction":"column"}},[o("h1",{attrs:{id:"EditingHeader"}},[t._v("Modification d'auteur : "+t._s(t.target.last_name)+" "+t._s(t.target.first_name))]),o("div",{staticClass:"form-container"},[o("form",{attrs:{action:"#"},on:{submit:t.update}},[o("label",{attrs:{for:"author_last_name"}},[t._v("Nom")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.last_name,expression:"target.last_name"}],attrs:{type:"text",id:"author_last_name"},domProps:{value:t.target.last_name},on:{input:function(e){e.target.composing||t.$set(t.target,"last_name",e.target.value)}}}),o("label",{attrs:{for:"author_first_name"}},[t._v("Prénom")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.first_name,expression:"target.first_name"}],attrs:{type:"text",id:"author_first_name"},domProps:{value:t.target.first_name},on:{input:function(e){e.target.composing||t.$set(t.target,"first_name",e.target.value)}}}),o("label",{attrs:{for:"book_page_numbers"}},[t._v("Date de naissance")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.target.birth_day,expression:"target.birth_day"}],attrs:{type:"date",id:"book_page_numbers"},domProps:{value:t.target.birth_day},on:{input:function(e){e.target.composing||t.$set(t.target,"birth_day",e.target.value)}}}),o("div",{staticClass:"actions-container"},[o("input",{attrs:{type:"button",value:"Annuler"},on:{click:t.cancel}}),o("input",{attrs:{type:"submit",value:"Modifier"}})])])])])},W=[],X={name:"EditAuthor",data:function(){return{target:{}}},computed:Object(a["a"])({},Object(d["c"])(["selectedAuthor"])),mounted:function(){this.selectedAuthor&&(this.target=Object(a["a"])({},this.selectedAuthor))},methods:{update:function(t){t.preventDefault(),this.$store.dispatch("editAuthor",this.target)},cancel:function(){this.$store.dispatch("goHome")}}},Y=X,Z=(o("25ee"),Object(m["a"])(Y,Q,W,!1,null,null,null)),tt=Z.exports,et={components:{EditAuthor:tt,EditBook:G,EditAdmin:K,Home:H},methods:Object(a["a"])(Object(a["a"])({},Object(d["b"])(["goHome","goEditProfile"])),{},{logout:function(){window.location.replace(ft("/"))}}),computed:Object(a["a"])({},Object(d["c"])(["isHome","isEditProfile","isEditBook","isEditAuthor"]))},ot=et,nt=(o("5c0b"),Object(m["a"])(ot,r,s,!1,null,null,null)),rt=nt.exports,st=(o("96cf"),o("1da1")),at=o("bc3a"),it=o.n(at),ut=function(t,e,o){return"string"===typeof t[o]?t[o]&&e[o]?t[o].localeCompare(e[o]):0:"number"===typeof t[o]?t[o]===e[o]?0:t[o]<e[o]?-1:1:0},ct={state:{state_authorsList:[],state_selectedAuthorBooks:[],state_selectedAuthor:null,state_selectedBook:null},getters:{authors:function(t){return t.state_authorsList},selectedAuthor:function(t){return t.state_selectedAuthor},authorBooks:function(t){return t.state_selectedAuthorBooks},selectedBook:function(t){return t.state_selectedBook}},actions:{loadAuthors:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e){var o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.commit,n=ft("/api/authors/all/"),t.next=4,it.a.get(n);case 4:r=t.sent,200===r.status&&o("setAuthors",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),loadAuthorBooks:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e){var o,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.commit,n=e.state,null===n.state_selectedAuthor){t.next=7;break}return r=ft("/api/books?authorId="+n.state_selectedAuthor.author_id),t.next=5,it.a.get(r);case 5:s=t.sent,200===s.status&&o("setSelectedAuthorBooks",s.data);case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),selectAuthor:function(t,e){var o=t.commit,n=t.dispatch;o("setSelectedAuthor",e),n("loadAuthorBooks")},selectBook:function(t,e){var o=t.commit;o("setSelectedBook",e)},editBook:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e,o){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=ft("/api/books/edit/"),t.next=4,it.a.put(r,o);case 4:s=t.sent,200===s.status?(console.log("book edited successfully"),n("loadAuthorBooks"),showMessage("livre a été modifié")):showError("Une erreur s'est produite, Veuillez réessayer"),n("goHome");case 7:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}(),deleteBook:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e,o){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=ft("/api/books/delete/"+o+"/"),t.next=4,it.a.delete(r);case 4:s=t.sent,200===s.status&&(console.log("book deleted successfully"),n("loadAuthorBooks"),showMessage("livre a été supprimé"));case 6:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}(),editAuthor:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e,o){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=ft("/api/authors/edit/"),t.next=4,it.a.put(r,o);case 4:s=t.sent,200===s.status&&(console.log("author edited successfully"),n("loadAuthors"),showMessage("l'auteur a été modifié")),n("goHome");case 7:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}(),deleteAuthor:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e,o){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=ft("/api/authors/delete/"+o+"/"),t.next=4,it.a.delete(r);case 4:s=t.sent,200===s.status&&(console.log("author deleted successfully"),n("loadAuthors"),showMessage("l'auteur a été supprimé"));case 6:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}()},mutations:{setAuthors:function(t,e){t.state_authorsList=e,t.state_selectedAuthor=null,t.state_selectedBook=null,t.state_selectedAuthorBooks.length=0},setSelectedAuthor:function(t,e){t.state_selectedAuthor=e,t.state_selectedBook=null,t.state_selectedAuthorBooks.length=0},setSelectedBook:function(t,e){t.state_selectedBook=e},setSelectedAuthorBooks:function(t,e){t.state_selectedBook=null,t.state_selectedAuthorBooks=e},sortAuthorsByKey:function(t,e){t.state_authorsList.sort((function(t,o){return ut(t,o,e)}))},sortBooksByKey:function(t,e){t.state_selectedAuthorBooks.sort((function(t,o){return ut(t,o,e)}))}}},lt=ct,dt={state:{location:"home"},getters:{isHome:function(t){return"home"===t.location},isEditProfile:function(t){return"editProfile"===t.location},isEditBook:function(t){return"editBook"===t.location},isEditAuthor:function(t){return"editAuthor"===t.location}},actions:{goEditProfile:function(t){var e=t.commit;e("setLocation","editProfile")},goHome:function(t){var e=t.commit;e("setLocation","home")},goEditBook:function(t){var e=t.commit;e("setLocation","editBook")},goEditAuthor:function(t){var e=t.commit;e("setLocation","editAuthor")}},mutations:{setLocation:function(t,e){return t.location=e,t}}},ht=dt;n["a"].use(d["a"]);var pt=new d["a"].Store({modules:{AuthorBooks:lt,Navigation:ht}});n["a"].config.productionTip=!1;var mt=null;mt=function(t){return"".concat(localStorage.getItem("base_url")).concat(t)};var ft=mt;new n["a"]({store:pt,render:function(t){return t(rt)}}).$mount("#app")},"5c0b":function(t,e,o){"use strict";var n=o("9c0c"),r=o.n(n);r.a},"85f0":function(t,e,o){},"92e1":function(t,e,o){},"9c0c":function(t,e,o){},aeac:function(t,e,o){},c63c:function(t,e,o){"use strict";var n=o("85f0"),r=o.n(n);r.a}});
//# sourceMappingURL=app.js.map